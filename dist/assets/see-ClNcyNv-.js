import{_ as C,r as a,i as f,c as d,b as n,a as e,n as S,d as N,w as T,T as I,y as M,F as g,z as F,g as V,o as u,f as z,t as l,p as B,h as L}from"./index--5WWQTNR.js";import{u as A}from"./news-B2LeGt5o.js";import{H as E}from"./header-CX3NYL0F.js";import{F as H}from"./footer-AuyBQ_78.js";const R=i=>(B("data-v-64964d0c"),i=i(),L(),i),$={class:"news-feed"},j=R(()=>e("h1",{class:"title"},"发现更多",-1)),q={class:"card-header"},D={class:"card-avatar"},G=["src"],P={class:"card-info"},J={class:"news-meta"},K={class:"news-author"},O={class:"news-type"},Q={class:"news-content"},U={class:"news-text"},W={class:"news-time"},X={class:"news-actions"},Y={class:"news-browse"},Z=["disabled"],ee={key:0},se={__name:"see",setup(i){const w=A(),c=a([]);let m=a(0);const r=a(!0),k=a(null),x=s=>{s.browse++};f(()=>{h()});const _=a(!1),h=()=>{m.value=0,_.value=!0,setTimeout(()=>{const s=[...w.allNews].sort(()=>Math.random()-.5);c.value=s.slice(0,10),o.value=s.slice(10),_.value=!1},1e3)},o=a([]);f(()=>{o.value=[...w.allNews],h()});const y=()=>{if(r.value)if(m.value++,o.value.length<10)r.value=!1,c.value.push(...o.value);else{const s=[...o.value].sort(()=>Math.random()-.5);c.value.push(...s.slice(0,10)),o.value=s.slice(10),b()}},b=()=>{F(()=>{const s=c.value.length-10,v=document.querySelector(`.news-card:nth-child(${s+1})`);v&&v.scrollIntoView({behavior:"smooth"})})};return(s,v)=>{const p=V("van-icon");return u(),d(g,null,[n(E),e("div",$,[j,e("div",null,[n(p,{name:"replay",class:S({"rotate-icon":_.value}),onClick:h,style:{"font-size":"30px"}},null,8,["class"]),N(" 刷新")]),e("div",{ref_key:"newsListRef",ref:k},[n(I,{name:"news-list",tag:"div"},{default:T(()=>[(u(!0),d(g,null,z(c.value,t=>(u(),d("div",{key:t.newsId,class:"news-card"},[e("div",q,[e("div",D,[e("img",{src:t.thumbnail,alt:"Author Avatar",width:"75px",height:"70px"},null,8,G)]),e("div",P,[e("h2",null,l(t.title),1),e("div",J,[e("span",K,l(t.author),1),e("span",O,l(t.newsType),1)])])]),e("div",Q,[e("p",U,l(t.content),1),e("p",W,l(t.createTime),1),e("div",X,[n(p,{name:"good-job-o",onClick:te=>x(t)},null,8,["onClick"]),e("p",Y,l(t.browse),1)])])]))),128))]),_:1})],512),e("button",{onClick:y,disabled:!r.value},[n(p,{name:"down"}),N("展示更多")],8,Z),r.value?M("",!0):(u(),d("p",ee,"没有更多了"))]),n(H)],64)}}},ce=C(se,[["__scopeId","data-v-64964d0c"]]);export{ce as default};
